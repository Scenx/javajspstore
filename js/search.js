var SEARCH=SEARCH||{};SEARCH.main=function(s){var t=function(){var t=s(window).height();document.getElementById("J_listWrap")&&(s("#J_listWrap").css("height",t-s("#J_listWrap").offset().top),s("#J_listWrap .list-items").css("height",t-s("#J_listWrap").offset().top),s("#J_listWrap .list-details").css("height",t-s("#J_listWrap").offset().top),s("html").addClass("sn-active"),s("body").css({height:t})),document.getElementById("J_resultNone")&&s("#J_resultNone").css("height",t-s("#J_resultNone").offset().top)},e=function(){s(".J_sort").on("click",function(){s("#J_cityWrap").addClass("city-wrap-up").css({height:0}),s("html").removeClass("sn-active"),s("body").removeAttr("style"),s(this).addClass("cur").siblings().removeClass("cur");var t=s(window).height();return s("#J_sortWrap").hasClass("sort-wrap-up")?(s(".result-wrap .mask").show(),s("#J_sortWrap").removeClass("sort-wrap-up"),s("html").addClass("sn-active"),s("body").css({height:t})):(s(".result-wrap .mask").hide(),s("#J_sortWrap").addClass("sort-wrap-up"),s("html").removeClass("sn-active"),s("body").removeAttr("style")),!1}),s("body").on("click",function(){s("#J_cityWrap").addClass("city-wrap-up").css({height:0}),s(".result-wrap .mask").hide(),s("html").removeClass("sn-active"),s("body").removeAttr("style"),s("#J_sortWrap").addClass("sort-wrap-up")})},i=function(){s("#searchAssInp").on("keyup input",function(){var t=s.trim(s(this).val());return""==t?(s(this).parents(".sn-nav-inp").find(".clo-se-input").hide(),s("body").removeClass("pop-color"),s(".search-wrap").show(),s("#searchAss").hide(),!1):(querySuggest(t),s(this).parents(".sn-nav-inp").find(".clo-se-input").show(),s("body").addClass("pop-color"),s(".search-wrap").hide(),void 0)}),s("#searchAssInp").parents("div").next(".clo-se-input").on("click",function(){s("#searchAssInp").val(""),s(this).parents(".sn-nav-inp").find(".clo-se-input").hide(),s("body").removeClass("pop-color"),s(".search-wrap").show(),s("#searchAss").hide(),s("#searchAssInp").focus()})},r=function(){s("#searchHotInp").on("focus",function(){var t=s.trim(s(this).val());s(".result-type").hide(),s("#wapSearchURL").show(),s("#Top").hide(),""!=t?(querySuggest(t),s(this).parents(".sn-nav-inp").find(".clo-se-input").show(),s(".result-wrap").hide(),s(".result-propose-store").hide(),s("#searchHot").show()):(s(this).parents(".sn-nav-inp").find(".clo-se-input").hide(),s("body").removeClass("pop-color"),s(".result-wrap").hide(),s(".result-propose-store").hide(),s("#searchHot").show(),s("#searchAss").hide())}),s("#searchHotInp").parents("div").next(".clo-se-input").on("click",function(){s("#searchHotInp").val(""),s(this).parents(".sn-nav-inp").find(".clo-se-input").hide(),s("body").removeClass("pop-color"),s(".result-wrap").hide(),s(".result-propose-store").hide(),s("#searchHot").show(),s("#searchAss").hide(),s("#searchHotInp").focus()}),s("#searchHotInp").on("keyup input",function(){var t=s.trim(s(this).val());""!=t?(querySuggest(t),s(this).parents(".sn-nav-inp").find(".clo-se-input").show(),s(".result-wrap").hide(),s(".result-propose-store").hide()):(s(this).parents(".sn-nav-inp").find(".clo-se-input").hide(),s("body").removeClass("pop-color"),s(".result-wrap").hide(),s(".result-propose-store").hide(),s("#searchHot").show(),s("#searchAss").hide())})},a=function(){var t=s(".list-bulletin").find("li").length,e=0;t>1&&(s(".list-bulletin ul").append(s(".list-bulletin li").eq(0).clone()),setInterval(function(){e++;var i=s(".list-bulletin li").eq(e).position().top;s(".list-bulletin ul").addClass("action").css("-webkit-transform","translateY(-"+i+"px)"),setTimeout(function(){e==t&&(s(".list-bulletin ul").removeClass("action").css("-webkit-transform","translateY(0)"),e=0)},300)},4e3))};return{pageInit:t,resultSort:e,searchAss:i,searchHot:r,listBulletin:a}}(Zepto),$(function(){SEARCH.main.pageInit(),SEARCH.main.resultSort(),SEARCH.main.searchAss(),SEARCH.main.searchHot(),SEARCH.main.listBulletin(),$(".sn-nav-inp .search-switch").on("click",function(){"0"==$(this).attr("data-rel")?$(this).attr("data-rel","1").text("店铺"):$(this).attr("data-rel","0").text("商品")}),$(".result-type").on("click",function(){$(this).hasClass("result-type-img")?($(this).removeClass("result-type-img"),$(".result-list").removeClass("result-list-img")):($(this).addClass("result-type-img"),$(".result-list").addClass("result-list-img"))}),lazyload(".lazyimg"),$("#J_listWrap .list-label-img img").each(function(){null!=this.getAttribute("data-src")&&"done"!=this.getAttribute("data-src")&&(this.onerror=function(){this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},this.src=this.getAttribute("data-src"),this.setAttribute("data-src","done"))})});